- 4장_엔티티 매핑 (22.09.22)
    
    ---
    
    ### 개념정리
    
    ### [1] @Entity, @Table 매핑
    
    ### [2] 데이터베이스 스키마 자동 생성
    
    ### [3] DDL
    
    ### [4] 기본 키 매핑
    
    ### [5] 필드와 컬럼 매핑
    
    ---
    
    ### 스터디 토론
    
    - Q. 직접할당이 아닌 자동생성에서 IDENTITY 전략을 실무에서 쓰이는지? 그 장점은?
        - A. IDENTITY 전략 같은경우 기본 키 생성을 데이터베이스에 위임을 하는것이다 보니(ex:AUTO_INCREMENT) 기본키 생성때와 더불어 데이터를 CRUD상황에서 DB에서 또 불러온다는 단점이 있다. 대용량의 데이터를 다룰 상황일 때에는 DB를 더 거친다는 점에서 비용이 크다라는 단점이 생긴다고 볼 수 있다.
    - Q. 프로퍼티 접근법의 장점을 모르겠다.(Getter코드를 직접쓰고 @Id까지 적어줘야 한다는 점에서)
        - A. 두개이상의 column을 primary key로 지정해야 할 경우, 그 두개이상의 요소에 해당한은 getter메서드를 작성한 후 @Id를 붙여주어 프로퍼티 접근법으로 사용?
            
            → 한다해도 번거로워 장점에 대한 결론을 명확히 찾지 못했음.
            
    
    ---
    
    - 주현님이 주신 자료
        
        `@Embeddable` 참고
        
        - [https://velog.io/@fj2008/JPA-복합키-작성기초](https://velog.io/@fj2008/JPA-%EB%B3%B5%ED%95%A9%ED%82%A4-%EC%9E%91%EC%84%B1%EA%B8%B0%EC%B4%88)
        - [https://galid1.tistory.com/592](https://galid1.tistory.com/592)
    
    ---
    
    - 민규님이 주신 자료
    
    <aside>
    💡 지현님 이전에 리뷰 남겨주신 내용 중에 아티클 내 컴포넌트들은 ID Generation를 DB에 의존하지 않고 코드 내에서 SequenceGenerator로 직접 처리한다고 말씀해주셔서 관련 내용을 조금 찾아봤었는데요.
    제가 찾아본 내용 중에 id 값 생성을 DB에 의존하게 되면 INSERT Query 이후에 id 값이 세팅되다보니 이후에 별도로 id 값을 조회하는 과정이 있다라는 부분이 있었고 해당 내용이 직접 처리하는 이유에 가장 가깝다고 생각이 드는 것 같습니다. 혹시 다른 이유가 추가적으로 있을까요?
    
    네, 민규님.
    조금 더 해당 제약을 General하게 표현한다면, "Sequence 생성 프로세스가 DB 장비에 의존성이 생긴다"고 표현 가능할 것 같아요.
    말씀주신 것처럼 신규 Sequence를 획득하기 위해 Select가 발생하는 부분도 그 영향일 수 있겠지만요.
    저희는 글로벌 서비스를 목표로 하는 만큼 추후 DB가 국가별로 나뉜다든가 지역에 따라 Sharding 처리된다든가 하는 경우, 위와 같은 Sequence 획득방식은 제약이 생길 수 밖에 없습니다.
    예를 들어, User라는 사용자 테이블이 있는데, 이것이 국가 또는 지역에 따라 DB 수준 또는 테이블 수준으로 저장 공간이 나뉜다고 생각해볼게요.
    이 경우, Auto increment 방식으로 생성된 Sequence는 각 테이블별로 ID 중복이 발생하는 문제를 해결하기 어렵고요.
    결과적으로 Sequence 생성만을 위한 별도의 테이블을 생성하거나 다른 인프라를 활용해 Sequence를 생성하게 됩니다.
    (하지만 이 역시 Sequence 생성 프로세스가 해당 인프라에 종속되어, 추후 SPOF 요소중에 하나가 될 가능성이 있지요)
    반면, 저희가 현재 선택한 Sequence Generation 방식은 별도의 인프라를 거치지 않고 Application 내부적으로 Unique ID를 생성하는 방식인 만큼, 특정 인프라에 대한 의존도가 없다는 장점이 있습니다.
    사실 어느 한 방식이 정답이라고 강요할 수는 없고요.
    앞의 DB 수준의 Sequence Generation 방식도 현업에서 많이 쓰시는 방식이기는 합니다.
    장단점을 잘 알고 쓰시면, 그걸로 충분한 것 같아요.
    
    </aside>
    
    ###
