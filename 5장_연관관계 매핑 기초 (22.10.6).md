- 5장_연관관계 매핑 기초 (22.10.6)
    
    ```python
    **객체지향 설계의 목표는 자율적인 객체들의 협력 공동체를 만드는 것이다. 
    - 조영호(객체지향의 사실과 오해)-**
    ```
    
    - **객체** 연관관계 vs **테이블** 연관관계 **`차이점`**
        - **객체**는 참조(주소)로, **테이블**은 외래키로 연관관계를 맺는다.
        - 연관된 데이터를 조회할 때 **객체**는 참조(member.getPost())을 사용하고
            
            **테이블**은 조인(JOIN)을 사용한다.
            
        - 외래키를 사용하는 **테이블의 연관관계**는 **양방향**이다.(
            - A JOIN B (ok) → B JOIN A (ok)
        - 참조를 사용하는 **객체의 연관관계**는 **단방향**
            - A → B (a.b)
        - 객체의 연관관계를 양방향으로 만들기 위해선 단방향 연관관계 2개를 만든다.
            - A → B (a.b) , B → A (b.a)
    
    ### 단방향 연관관계
    
    - 참조를 통한 연관관계 조회는 객체 그래프 탐색을 사용해 엔티티를 조회,수정한다
    
    ![스크린샷 2022-10-05 23.50.52.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/6633d020-541d-444d-80d5-8788aa7908f0/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-10-05_23.50.52.png)
    
    ### 양방향 연관관계
    
    - 외래키의 주인은 항상 **`N`**쪽 , 이 **`N` 쪽에서 관계의 주인이 설정이 되어야한다.**
    - 참조를 통한 연관관계일 경우엔, 일대다, 다대일 개념으로 단방향 연관관계를 양쪽에서 맺어주는 것
    - mappedBy는 연관관계의 주인(다쪽)을 가르킬때 쓰는것 → 연관관계의 주인이 아닌곳에서 mappedBy 속성을 사용해 주인을 지정
    - 연관관계의 **`주인만`**이 외래키를 관리(**`등록,수정`**)할 수 있음.
    - 주인이 아닌쪽은 읽기만 가능
    - 객체 관점에서 **`양쪽 방향 모두`**에 값을 **`입력`**해주는 것이 가장 안전
    - 즉 , 단방향 연관관계와 다른점은 반대방향으로 객체 그래프 탐색기능이 추가된 것 뿐
    
    ![스크린샷 2022-10-05 23.57.24.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/8d40d11c-7cb9-4076-90f5-18dba90c358e/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-10-05_23.57.24.png)
    
    ### 양방향 연관관계의 주의
    
    - 객체 지향적 구조를 띄기 위해 양쪽에 값을 설정해주어야 한다.
    - 연관관계 **편의 메소드**를 생성
        - `1` 이 되는쪽에 add를 해주고 `N` 이 되는쪽에 set을 해주는 작업을 (실수할 가능성) **(편의상)메소드**를 작성하여 한번에 연관관계를 매핑해주도록 한다.
    - member를 기준으로 changeTeam 메소드를 만들것인가
        
        team을 기준으로 addMember를 만들것인가
        
        ```java
        //==== 연관관계 편의메서드 둘 중 택 1 ====//
        
        //Member
        public void changTeam(Team team) {
            this.team = team;
            team.getMembers().add(this);
        }
        
        //Team
        public void addMember(Member member) {
            member.setTeam(this);
            members.add(member);
        }
        ```
        
    
    - **설계시**
        
        단방향으로 설계를 끝내고 양방향에 대한(또 다른 단방향) 매핑은 단방향 연관관계에 추가로 추가해준다고 생각하면 편하다.
        
    
    ### 테이블 구조 & 객체 구조
    
    ![스크린샷 2022-10-06 00.05.34.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1acadd16-f1d7-49dc-98a9-482b6b26d034/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-10-06_00.05.34.png)
    
    ![스크린샷 2022-10-06 00.05.41.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/3ef3a778-f273-4cd2-a9dc-391833b04298/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-10-06_00.05.41.png)
